{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap f60d53da957a83985d60","webpack:///./lib/index.js","webpack:///external \"async\"","webpack:///external \"maybe-try\"","webpack:///external \"superagent\""],"names":["timeout","baseUri","rootUrl","fetch","username","callback","Error","auto","moduleList","cb","getModules","downloads","results","getModuleListDownloads","modules","getModuleListDetails","err","result","finalResult","formatResult","fetcher","uri","get","response","set","end","res","body","Object","keys","length","text","endpoints","byUser","byModule","start","pkgName","generateEmptyDownloads","lastDay","lastWeek","lastMonth","authorDownlods","forEach","module","name","moduleDownloads","contributors","maintainers","maintainer","link","generateUserUrl","key","moduleVal","push","author","checkJson","JSON","parse","userEndpoint","getModuleList","maybeTry","list","endpoint","generateModuleDetail","version","description","main","collaborators","license","homepage","repository","map","moduleName","moduleEndpoint","getModuleDetail","detail","filter","l","error","reason","downloadTags","generateDates","daysFromStart","today","Date","searchDate","search","setDate","getDate","dd","mm","getMonth","sdd","smm","yyyy","getFullYear","syyyy","checkDates","join","getModuleDownloads","downloadResults","formattedResults","reduce","data","month","week","i","obj","count","yesterday"],"mappings":"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","file":"myNpmProfile.node.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"myNpmProfile\"] = factory();\n\telse\n\t\troot[\"myNpmProfile\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f60d53da957a83985d60","import { auto, map } from 'async';\nimport maybeTry from 'maybe-try';\nimport { get } from 'superagent';\n\nconst timeout = 5000;\nconst baseUri = 'https://www.npmjs.com';\nconst rootUrl = 'https://registry.cnpmjs.org';\n\nexport const fetch = (username, callback) => {\n  if (!username) {\n    return callback(new Error('username is required'));\n  }\n\n  auto({\n    moduleList: (cb) => getModules(username, cb),\n    downloads: ['moduleList', (results, cb) => getModuleListDownloads(results.moduleList, cb)],\n    modules: ['moduleList', (results, cb) => getModuleListDetails(results.moduleList, cb)]\n  }, (err, result) => {\n    if (err) {\n      return callback(err);\n    }\n\n    const finalResult = formatResult(username, result);\n    callback(null, finalResult);\n  });\n};\n\nconst fetcher = (uri, callback) => {\n  get(uri)\n    .timeout({ response: timeout })\n    .set('accept', 'json')\n    .end((err, res = {}) => {\n      const { body = {} } = res;\n      const result = Object.keys(body).length ? body : (res.text || '');\n      callback(err, result);\n    });\n};\n\nconst endpoints = {\n  byUser: `${rootUrl}/-/by-user`,\n  byModule: `${rootUrl}`,\n  downloads: function(start, end, pkgName) {\n    return `https://api.npmjs.org/downloads/range/${start}:${end}/${pkgName}`;\n  }\n};\n\nfunction generateEmptyDownloads() {\n  return {\n    lastDay: 0,\n    lastWeek: 0,\n    lastMonth: 0\n  };\n}\n\nfunction formatResult(username, result) {\n  const finalResult = {\n    modules: []\n  };\n\n  const authorDownlods = generateEmptyDownloads();\n\n  result.modules.forEach((module) => {\n    const { name } = module;\n\n    const moduleDownloads = result.downloads[name] || generateEmptyDownloads();\n    // Tag module download data\n    module.downloads = moduleDownloads;\n\n    // Tag additional maintainer and contributor data\n    module.contributors = module.contributors || [];\n    module.maintainers = module.maintainers || [];\n    module.maintainers.forEach((maintainer) => {\n      const { name } = maintainer;\n      maintainer.link = generateUserUrl(name);\n    });\n\n    // Tag additional author download data\n    Object.keys(authorDownlods).forEach((key) => {\n      const moduleVal = moduleDownloads[key];\n      if (!moduleVal) {\n        return;\n      }\n      authorDownlods[key] += moduleVal;\n    });\n\n    finalResult.modules.push(module);\n  });\n\n  finalResult.author = {\n    username,\n    link: generateUserUrl(username),\n    downloads: authorDownlods\n  };\n\n  return finalResult;\n}\n\nfunction checkJson(body) {\n  if (typeof body === 'string') {\n    body = JSON.parse(body);\n  }\n\n  return body;\n}\n\nfunction getModules(username, callback) {\n  const userEndpoint = `${endpoints.byUser}/${username}`;\n\n  getModuleList(username, userEndpoint, maybeTry.callback([], (err, list) => {\n    callback(err, list.result);\n  }));\n}\n\nfunction getModuleList(username, endpoint, callback) {\n  fetcher(endpoint, (err, body) => {\n    if (err) {\n      return callback(err);\n    }\n\n    body = checkJson(body);\n\n    const moduleList = body[username];\n    callback(null, moduleList);\n  });\n}\n\nfunction generateModuleDetail() {\n  return {\n    name: '',\n    version: '',\n    description: '',\n    author: {},\n    main: '',\n    contributors: [],\n    collaborators: [],\n    license: '',\n    homepage: '',\n    repository: {}\n  }\n}\n\nfunction getModuleListDetails(moduleList, callback) {\n  map(moduleList, (moduleName, cb) => {\n    const moduleEndpoint = `${endpoints.byModule}/${moduleName}/latest`;\n    getModuleDetail(moduleEndpoint, maybeTry.callback(generateModuleDetail(), (err, detail) => {\n      cb(err, detail.result);\n    }));\n  }, (err, list) => {\n    if (err) {\n      return callback(err);\n    }\n\n    list = list.filter(l => !!l.name);\n    callback(null, list);\n  });\n}\n\nfunction getModuleDetail(endpoint, callback) {\n  fetcher(endpoint, (err, body) => {\n    if (err) {\n      return callback(err);\n    }\n\n    body = checkJson(body);\n\n    // NOTE: 404s\n    if (body.error && body.reason) {\n      body = {};\n    }\n\n    callback(null, body);\n  });\n}\n\nconst downloadTags = {\n  lastDay: 'daily-downloads',\n  lastWeek: 'weekly-downloads',\n  lastMonth: 'monthly-downloads'\n};\n\nfunction generateDates(daysFromStart) {\n  daysFromStart = daysFromStart || 0;\n\n  var today = new Date();\n  var searchDate = new Date();\n  var search = new Date(searchDate.setDate(searchDate.getDate() - daysFromStart));\n\n  var dd = today.getDate();\n  var mm = today.getMonth() + 1;\n\n  var sdd = search.getDate();\n  var smm = search.getMonth() + 1;\n\n  var yyyy = today.getFullYear();\n  var syyyy = search.getFullYear();\n\n  checkDates(dd, mm);\n  checkDates(sdd, smm);\n\n  var start = [syyyy, smm, sdd].join('-');\n  var end = [yyyy, mm, dd].join('-');\n\n  return {\n    start,\n    end\n  };\n}\n\nfunction checkDates(dd, mm) {\n  if (dd < 10) {\n      dd= '0' + dd;\n  }\n  if (mm < 10) {\n      mm= '0' + mm;\n  }\n}\n\nfunction getModuleListDownloads(moduleList, callback) {\n  map(moduleList, (moduleName, cb) => {\n      const { start, end } = generateDates(30);\n      const moduleEndpoint = endpoints.downloads(start, end, moduleName);\n\n      getModuleDownloads(moduleEndpoint, maybeTry.callback(generateEmptyDownloads(), (err, downloads) => {\n        if (err) {\n          return cb(err);\n        }\n\n        downloads = downloads.result;\n        return cb(null, { moduleName, downloads });\n      }));\n  }, (err, downloadResults) => {\n    if (err) {\n      return callback(err);\n    }\n\n    const formattedResults = downloadResults.reduce((result, data) => {\n      const { moduleName, downloads } = data;\n      result[moduleName] = downloads;\n      return result;\n    }, {});\n\n    callback(null, formattedResults);\n  });\n}\n\nfunction getModuleDownloads(moduleEndpoint, callback) {\n  fetcher(moduleEndpoint, (err, response) => {\n    if (err) {\n      return callback(err);\n    }\n\n    const { downloads = [] } = response;\n\n    const month = downloads.length;\n    const week = month - 7;\n    const today = month - 1;\n\n    const result = generateEmptyDownloads(); //lastDay, lastWeek, lastMonth\n\n    // Must traverse backwards due to response\n    for (let i = month - 1; i >= 0; i--) {\n      const obj = downloads[i];\n      const count = obj.downloads;\n\n      if (i >= today) {\n        result.lastDay += count;\n      }\n\n      if (i >= week) {\n        result.lastWeek += count;\n      }\n\n      if (i && i <= month) {\n        result.lastMonth += count;\n      }\n    }\n\n    // NOTE: due to timezone differences, lastDay could be empty as the endpoint is not letting you dial backwards\n    // to the full 24-hr time period of \"the day\" in UTC, in these cases, lastDay should just reflect yesterday.\n    if (!result.lastDay) {\n      const yesterday = downloads[downloads.length - 2];\n      if (yesterday) {\n          result.lastDay = yesterday.downloads;\n      }\n    }\n\n    callback(null, result);\n  });\n}\n\nfunction generateUserUrl(username) {\n  return `${baseUri}/~${username}`;\n}\n\n\n// WEBPACK FOOTER //\n// ./lib/index.js","module.exports = require(\"async\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"async\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"maybe-try\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"maybe-try\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"superagent\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"superagent\"\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}